<script>
async function updateScreen() {
    // ВАЖНО: Проверьте, что эта ссылка СОВПАДАЕТ с той, что в окне ngrok сейчас!
    const baseUrl = "https://matt-wiliest-latrina.ngrok-free.dev/data";
    const url = baseUrl + "?v=" + new Date().getTime(); // Обман кэша
    
    try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('Ошибка сети');
        
        const data = await response.json();
        console.log("Данные получены:", data);

        // Обновляем текст владельца
        const ownerElement = document.getElementById('owner');
        ownerElement.innerText = "Владелец: " + (data.owner || "Загрузка...");

        // Обновляем цену
        const priceElement = document.getElementById('current_price');
        priceElement.innerText = (data.price || "10") + " ⭐";

        // Если верифицирован — добавляем эффект
        if (data.is_verified) {
            ownerElement.style.color = "#ffd700";
            ownerElement.style.fontWeight = "bold";
        } else {
            ownerElement.style.color = "#ffffff";
        }

    } catch (error) {
        console.error("Ошибка обновления:", error);
    }
}

// Запускаем обновление каждые 3 секунды
setInterval(updateScreen, 3000);
updateScreen();
</script>
